<script>
 function caesarCipherEncodeAndDecodeEngine(inStr, numShifted)
{
	var shiftNum = numShifted; 
	var charCode = 0;
	var outStr = "";
	var shftedcharCode = 0;
	var result = 0;
 	for (var i=0; i<inStr.length; i++){
 		charCode = inStr[i].charCodeAt();
		shftedcharCode = charCode + shiftNum;
		result = charCode;
 		if ( (charCode>=48 && charCode<=57))
		{
			if ( shftedcharCode < 48 ){
 		  		var diff = Math.abs(48-1-shftedcharCode)%10;
 				while( diff >= 10){
		  			diff = diff%10;
				}
				document.getElementById("diffID").innerHTML = diff;
 				shftedcharCode = 57-diff;
				
				result = shftedcharCode;
			}
 		  	else if ( shftedcharCode>=48 && shftedcharCode<=57 ){
				result = shftedcharCode;
			}
 			else if ( shftedcharCode > 57 ){
 		  		var diff = Math.abs(57+1-shftedcharCode)%10;
 				while( diff >= 10){
		  			diff = diff%10;
				}
				document.getElementById("diffID").innerHTML = diff;
 				shftedcharCode = 48+diff;
 				result = shftedcharCode;
			}
 		}
 		else if ( (charCode>=65 && charCode<=90) )
		{
 		  	if (shftedcharCode <=64 ){
 		  		var diff = Math.abs(65-1-shftedcharCode)%26;
 				while( (diff%26) >= 26){
		  			diff = diff%26;
				}
				shftedcharCode = 90-diff;
				result = shftedcharCode;
			}
 		  	else if ( shftedcharCode>=65 && shftedcharCode<=90 ){
				result = shftedcharCode;
			}
 			else if (shftedcharCode>90 ){
				var diff = Math.abs(shftedcharCode-1-90)%26;
 				while( (diff%26) >= 26){
		  			diff = diff%26;
				}
				shftedcharCode = 65+diff;
				result = shftedcharCode;
			}
		
		}
 		else if ( (charCode>=97 && charCode<=122))
		{
		  	if ( shftedcharCode<=96 ){
 		  		var diff = Math.abs(97-1-shftedcharCode)%26;
 				while( (diff%26) >= 26){
		  			diff = diff%26;
				}
				shftedcharCode = 122-diff;
				result = shftedcharCode;
			}
 		  	else if ( shftedcharCode>=97 && shftedcharCode<=122 ){
				result = shftedcharCode;
			}
 			else if (shftedcharCode>122 ){
				var diff = Math.abs(shftedcharCode-1-122)%26;
 				while( (diff%26) >= 26){
		  			diff = diff%26;
				}
				shftedcharCode = 97+diff;
				result = shftedcharCode;
			}
		
		}
		outStr = outStr + String.fromCharCode(parseInt(result));
	}
	return outStr;
}

//demonstrate the use of the double-side caesarCipher Engine
 function caesarCipher()
{
 	var inStr = document.getElementById("secretID").value;
 	var shiftNum = parseInt(document.getElementById("numShifted").value); 
 	var outStr = "";
 	outStr = caesarCipherEncodeAndDecodeEngine(inStr,shiftNum);
 	
	document.getElementById("cipherTxtEncryptedID").value = outStr;
}
 function deCaesarCipher(onBuClicked)
{
 	if (onBuClicked > 0){
		document.getElementById("numShifted").value++;
	}else if (onBuClicked < 0){
		document.getElementById("numShifted").value--;
	}else{
		document.getElementById("numShifted").value;
	}
 	var shiftNum = parseInt(document.getElementById("numShifted").value);
 	var str = document.getElementById("encryptedID").value;
	var inStr = str.toString();
 	var charCode = 0;
	var outStr = "";
 	document.getElementById("debug").innerHTML = shiftNum;
 	outStr = caesarCipherEncodeAndDecodeEngine(inStr,shiftNum);
  return outStr;
}
